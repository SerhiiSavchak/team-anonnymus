var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in t){var i=t[e];delete t[e];var o={id:e,exports:{}};return n[e]=o,i.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,n){t[e]=n},e.parcelRequired7c6=i),i("3rDVG"),i("5h2Rr");var o=i("bkYP9");async function s(e,n){try{const t=await fetch(`${o.BASE_URL}${e}`,n);return(await t.json()).results.slice(0,3)}catch(e){console.log(e.message)}}async function a(e){try{const n=await fetch(`${o.BASE_URL}genre/movie/list?language=en`,e);return(await n.json()).genres}catch(e){console.log(e.message)}}const l=document.querySelector(".weekly-list");o=i("bkYP9");var r=i("8IXMh");function c(e,n){return e.map((e=>{const t=e.genre_ids.map((e=>n.find((n=>n.id===e)).name));return{release_date:e.release_date,id:e.id,title:e.title,poster:e.poster_path,genreFirst:t[0],genreSecond:t[1]}}))}function d(e,n){const t=c(e,n);return t.map((e=>` \n        <li class="weekly-item" data-id="${e.id}">\n          <div class="weekly-wrap" ">\n              <img class="weekly-poster-list" src="https://image.tmdb.org/t/p/w500/${e.poster}" alt="${e.title}" />       \n          <div class="weekly-info">\n              <h2 class="weekly-info-title">${e.title}</h2>\n                  <div class="info-movie">\n                      <p class="weekly-info-genre">${e.genreFirst},&nbsp ${e.genreSecond}&nbsp ‚ñè</p>\n                      <p class="weekly-info-date">${e.release_date.slice(0,4)}</p>\n                  </div>\n          </div>\n          </div>     \n      </li>\n       `)).join("")}function p(e,n){e.innerHTML=n}window.addEventListener("load",(function(){const e=a(o.options);s("trending/all/week?language=en-US",o.options).then((n=>{e.then((e=>{const t=d(n,e);p(l,t),l.addEventListener("click",r.selectMovie)}))}))}));var f=i("7gMLt");const m=document.querySelector(".upcoming-container "),u={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZDBhNDQ5OWUzZjBiMDM2MDI1ZDEyNTk1Mzk3MjI3YSIsInN1YiI6IjY0N2YxZDM3Y2FlZjJkMDEzNjJjZDBjMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.04GEOyHwNXnOZB4gUWNaiyPlLlOZ0z9Ttfl7T5UFMuk"}};async function v(){const e=await async function(){try{const e=await fetch("https://api.themoviedb.org/3/movie/upcoming",u),n=await e.json();return n.results[Math.floor(Math.random()*n.results.length)]}catch(e){console.log(e.message)}}(),n=await async function(){try{const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?language=en",u);return(await e.json()).genres}catch(e){console.log(e.message)}}();return e.genres=e.genre_ids.map((e=>n.find((n=>n.id===e)).name)).slice(0,2).join(", "),e}window.addEventListener("load",(function(){v().then((e=>{m.insertAdjacentHTML("beforeend",function(e){let n=e.overview;e.overview.length>300&&(n=e.overview.split("").slice(0,300).join("")+"..."),(0,f.IsMovieInLibrary)(e.id)?textButton="Remove from my library":textButton="Add to my library";let t=`\n  \n  <div class ="upcoming-section-wrap">\n  \n    <picture class="upcoming-poster">\n    \n        <source media="(min-width:768px)" srcset="https://image.tmdb.org/t/p/original${e.backdrop_path}">\n        <img src="https://image.tmdb.org/t/p/w500${e.poster_path}" alt="poster_path" style="width:auto;">\n    </picture>\n\n    <div class="upcoming-info-wrap">\n        <h3 class="upcoming-film-title">${e.title}</h3>\n        \n        <div class ="info-film">\n            <div class="info-film-block">\n              <div class="info-film-item">\n                <p class="info-film-item-text">Release date</p>\n                <p class="info-film-resp-release-date">${e.release_date.replace(/^(\d+)-(\d+)-(\d+)$/,"$3.$2.$1")}</p>\n              </div>\n\n              <div class="info-film-item">\n                <p class="info-film-item-text">Vote / Votes</p>\n                <p class="info-film-votes-count"><span>${e.vote_average}</span><b>/</b><span>${e.vote_count}</span></p>\n              </div>\n            </div>\n            \n            <div class="info-film-block">\n              <div class="info-film-item">\n                <p class="info-film-item-text">Popularity</p>\n                <p class="info-film-popularity text-color-white">${Number(e.popularity.toFixed(1))}</p>\n              </div>\n\n              <div class="info-film-item">\n                <p class="info-film-item-text">Genre</p>\n                <p class="info-film-genre-style text-color-white genre-padding-bottom">${e.genres}</p>\n              </div>\n            </div> \n             \n        </div>\n    \n        <div class ="info-film-overview">\n      <h3 class="film-description-title">ABOUT</h3>\n      <p class="film-description">${n}</p>\n      <button class="btn js-add-remove-library" type="button" data-id="${e.id}">${textButton}</button>\n      </div>\n    </div>\n  </div>`;return e.results?'<h3 class="upcoming-alert">Ops! No upcoming films...</h3>':t}(e));document.querySelector(".js-add-remove-library").addEventListener("click",f.onAddRemoveMovie)}))})),i("8IXMh"),i("gTaRf");
//# sourceMappingURL=index.facfea58.js.map

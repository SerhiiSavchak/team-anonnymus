{"mappings":"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","sources":["src/js/components/hero.js"],"sourcesContent":["import axios from 'axios';\n\nlet filmID = '';\n\n// REFS\n\nconst heroSection = document.querySelector('.hero');\nconst videoModal = document.querySelector('iframe');\nconst refs = {\n  openModalBtn: document.querySelector('[data-modal-open]'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  modal: document.querySelector('[data-modal]'),\n};\n\nrefs.openModalBtn.addEventListener('click', toggleModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\nwindow.addEventListener('load', onPageLoad);\n\nheroSection.addEventListener('click', watchFilm);\n\n// FETCH\n\nasync function fetchTrandingFilmDay() {\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZDBhNDQ5OWUzZjBiMDM2MDI1ZDEyNTk1Mzk3MjI3YSIsInN1YiI6IjY0N2YxZDM3Y2FlZjJkMDEzNjJjZDBjMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.04GEOyHwNXnOZB4gUWNaiyPlLlOZ0z9Ttfl7T5UFMuk',\n    },\n  };\n\n  const URL = `https://api.themoviedb.org/3/trending/movie/day?language=en-US`;\n\n  let response = await axios.get(URL, options);\n  if (response.status !== 200) {\n    throw new Error(response);\n  } else {\n    const data = response;\n\n    firstHeroMarkup(data);\n  }\n}\n\nfunction onEror() {\n  document.querySelector('.hero-title').textContent =\n    'Let’s Make Your Own Cinema';\n  // heroWrap()\n  document.querySelector(\n    '.hero-text-big'\n  ).textContent = `Is a guide to creating a personalized movie theater experience. You'll need a\nprojector, screen, and speakers. Decorate\nyour space, choose your films, and stock up on snacks for the full experience.`;\n\n  document.querySelector(\n    '.hero-text-mobile'\n  ).textContent = `Is a guide to creating a personalized movie theater experience. You'll need a\nprojector, screen, and speakers.`;\n  document.querySelector('.hero-rating').classList.add('visuality-hidden');\n  document\n    .querySelector('.hero-text-cont')\n    .classList.remove('visuality-hidden');\n\n  document.querySelector('.hero-black-btn').classList.add('visuality-hidden');\n  document.querySelector('.hero-btn').classList.add('visuality-hidden');\n\n  const ereoBtn = `<a href=\"./src/catalog.html\" class=\"hero-link\">\n                <button type=\"button\" class=\"hero-start-btn\">Get Started</button></a>`;\n\n  heroSection.insertAdjacentHTML('beforeend', ereoBtn);\n  heroSection.style.backgroundImage =\n    'linear-gradient(86.77deg,#111111 30.38%,rgba(17, 17, 17, 0) 65.61%),url(..srcimageshome-pagehero-home1x-mobile.jpg)';\n}\n\n// LISTENER\n\nfunction onPageLoad() {\n  heroWrap();\n  console.log('hello onPageLoad');\n  fetchTrandingFilmDay()\n    .then(data => {\n      document\n        .querySelector('.hero-text-cont')\n        .classList.remove('visuality-hidden');\n    })\n    .catch(error => {\n      onEror();\n    });\n\n  setInterval(() => {\n    fetchTrandingFilmDay();\n  }, 20000);\n}\n\n// UTILS\n\nfunction heroRandomaizer() {\n  return Math.floor(Math.random() * (19 - 0 + 1)) + 0;\n}\n\n// MARKUP\nfunction firstHeroMarkup(data) {\n  heroRandomaizer();\n  const fetchInfo = data.data.results[kaleidoscope];\n\n  // start staer\n  document.querySelector('.rating_value').textContent = fetchInfo.vote_average;\n  const ratingActiveWidth = fetchInfo.vote_average / 0.05 / 2;\n  document.querySelector(\n    '.rating_active'\n  ).style.width = `${ratingActiveWidth}%`;\n  // end staer\n\n  document.querySelector(\n    '.hero-title'\n  ).textContent = `${fetchInfo.original_title}`;\n  document.querySelector('.hero-text-big').textContent = `${fetchInfo.overview\n    .split(' ')\n    .slice(0, 50)\n    .join(' ')}...`;\n\n  document.querySelector(\n    '.hero-text-mobile'\n  ).textContent = `${fetchInfo.overview.split(' ').slice(0, 25).join(' ')}...`;\n\n  heroSection.style.backgroundImage = `linear-gradient(\n      86.77deg, #111111 30.38%, rgba(17, 17, 17, 0) 65.61%), url(https://image.tmdb.org/t/p/original/${fetchInfo.backdrop_path})`;\n\n  getFilmID(fetchInfo);\n}\n\nfunction heroWrap() {\n  const box = `<div class=\"hero-text-cont сontainer visuality-hidden\">\n  <h2 class=\"hero-title\"></h2>\n        <!-- rating -->\n        <div class=\"hero-rating\">\n            <div class=\"hero-rating_body\">\n                <div class=\"rating_active\"></div>\n            </div>\n            <div class=\"rating_value\"></div>\n        </div>\n        <!-- end rating -->\n        <p class=\"hero-text-mobile\"></p>\n        <p class=\"hero-text-big\"></p>\n        <div class=\"hero-btn\">\n            <button type=\"button\" class=\"btn\" data-modal-open>Watch trailer</button>\n            <button type=\"button\" class=\"hero-black-btn\">\n                More details\n            </button>\n        </div>\n        </div>`;\n  heroSection.insertAdjacentHTML('afterbegin', box);\n}\n\n// MODAL\n\n// REFS\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n}\n\nfunction getFilmID(fetchInfo) {\n  return (filmID = fetchInfo.id);\n}\n\nfunction watchFilm() {\n  fetchFilmByID().catch(function (error) {\n    console.log('Ereor wathtrailer');\n    onModalError();\n  });\n}\n\n// FETCH MODAL\n\nasync function fetchFilmByID() {\n  filmID;\n\n  const options = {\n    method: 'GET',\n    headers: {\n      accept: 'application/json',\n      Authorization:\n        'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZDBhNDQ5OWUzZjBiMDM2MDI1ZDEyNTk1Mzk3MjI3YSIsInN1YiI6IjY0N2YxZDM3Y2FlZjJkMDEzNjJjZDBjMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.04GEOyHwNXnOZB4gUWNaiyPlLlOZ0z9Ttfl7T5UFMuk',\n    },\n  };\n\n  const URL = `https://api.themoviedb.org/3/movie/${filmID}/videos?language=en-US,`;\n\n  let response = await axios.get(URL, options);\n  if (response.status !== 200) {\n    throw new Error(response);\n  } else {\n    const data = response;\n    console.log(data.data.results[0].key);\n    addKey(data);\n  }\n}\n\nfunction addKey(data) {\n  const curentKey = data.data.results[0].key;\n  console.log(data.data);\n  videoModal.src = `https://www.youtube.com/embed/${curentKey}`;\n}\n\nfunction onModalError() {\n  //  .modal\n  videoModal.classList.add('visuality-hidden');\n  const errorText = `<p>OOPS...\n    We are very sorry!\n    But we couldn’t find the trailer.</p>\n<picture>\n    <source srcset=\"\n                            src\\images\\error\\error-@1x-mobile.png 1x, \n                            src\\images\\error\\error-@2x-mobile.png 2x\" media=\"(max-width: 768px)\">\n    <source srcset=\"\n                            src\\images\\error\\error-@1x-tablet.png 1x, \n                            src\\images\\error\\error-@2x-tablet.png 2x\" media=\"(min-width: 768px)\">\n    <source srcset=\"\n                            src\\images\\error\\error-@1x-desctop.png 1x, \n                            src\\images\\error\\error-@2x-desctop.png 2x\" media=\"(min-width: 1200px)\">\n    <img class=\"hero-error-img\" src=\"src\\images\\error\\error-@1x-mobile.png \" alt=\"Error\" width=\"200\">\n</picture>`;\n\n  refs.modal.insertAdjacentHTML('afterbegin', errorText);\n}\n"],"names":["$2shzp","parcelRequire","$3d70c26887ca23be$var$filmID","$3d70c26887ca23be$var$heroSection","document","querySelector","$3d70c26887ca23be$var$videoModal","$3d70c26887ca23be$var$refs","openModalBtn","closeModalBtn","modal","async","$3d70c26887ca23be$var$fetchTrandingFilmDay","response","default","get","method","headers","accept","Authorization","status","Error","data","Math","floor","random","fetchInfo","results","kaleidoscope","textContent","vote_average","ratingActiveWidth","style","width","original_title","overview","split","slice","join","backgroundImage","backdrop_path","id","$3d70c26887ca23be$var$getFilmID","$3d70c26887ca23be$var$firstHeroMarkup","$3d70c26887ca23be$var$toggleModal","classList","toggle","addEventListener","window","box","insertAdjacentHTML","$3d70c26887ca23be$var$heroWrap","console","log","then","remove","catch","error","add","ereoBtn","$3d70c26887ca23be$var$onEror","setInterval","options","URL","key","curentKey","src","$3d70c26887ca23be$var$addKey","$3d70c26887ca23be$var$fetchFilmByID","errorText","$3d70c26887ca23be$var$onModalError"],"version":3,"file":"library.ecbc835b.js.map"}
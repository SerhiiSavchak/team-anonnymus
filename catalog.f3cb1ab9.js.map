{"mappings":"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","sources":["src/catalog.js","src/js/components/catalog-list.js"],"sourcesContent":["import './js/components/header';\nimport './js/components/hero';\nimport './js/components/catalog-list';\nimport './js/components/modal';\n\n\n\n\nimport './js/components/footer';\n\n","const BASE_URL = 'https://api.themoviedb.org/3/';\nconst END_POINT =\n  'trending/movie/week?language=en-US&include_adult=false&include_video=false&page=1&per_page=10';\nconst STORAGE_KEY = 'ID';\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZDBhNDQ5OWUzZjBiMDM2MDI1ZDEyNTk1Mzk3MjI3YSIsInN1YiI6IjY0N2YxZDM3Y2FlZjJkMDEzNjJjZDBjMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.04GEOyHwNXnOZB4gUWNaiyPlLlOZ0z9Ttfl7T5UFMuk',\n  },\n};\n\n// REFS\nconst ulRef = document.querySelector('.catalog-list');\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-form-input');\nconst errorContainer = document.querySelector('.error-container');\n\n// WORKSPACE\nwindow.addEventListener('load', onPageLoad);\nsearchForm.addEventListener('submit', onSearchSubmit);\n\n// LISTENER\nfunction onPageLoad() {\n  const screenWidth = window.innerWidth;\n  let perPage;\n\n  if (screenWidth >= 768) {\n    perPage = 20;\n  } else {\n    perPage = 10;\n  }\n\n  const endpoint = `trending/movie/week?language=en-US&include_adult=false&include_video=false&page=1&per_page=${perPage}`;\n\n  fetchData(endpoint, options).then(response => {\n    console.log(response);\n    renderMarkup(response.slice(0, perPage)).then(markup => {\n      addMarkup(ulRef, markup);\n    });\n  });\n}\n\nfunction onSearchSubmit(event) {\n  event.preventDefault();\n  const searchValue = searchInput.value.trim();\n  let perPage;\n\n  if (window.innerWidth >= 768) {\n    perPage = 20;\n  } else {\n    perPage = 10;\n  }\n\n  if (searchValue !== '') {\n    const searchEndpoint = `search/movie?query=${searchValue}&language=en-US&page=1&per_page=${perPage}`;\n\n    fetchData(searchEndpoint, options).then(response => {\n      console.clear();\n      console.log(response);\n      if (response.length > 0) {\n        renderMarkup(response.slice(0, perPage)).then(markup => {\n          addMarkup(ulRef, markup);\n        });\n        hideNoResultsMessage();\n      } else {\n        showNoResultsMessage();\n      }\n    });\n  } else {\n    onPageLoad();\n    hideNoResultsMessage();\n  }\n}\n\n// ---- Функція для приховування повідомлення про відсутність результатів\nfunction hideNoResultsMessage() {\n  const errorMessage = errorContainer.querySelector('.no-results-message');\n  if (errorMessage) {\n    errorMessage.remove();\n  }\n}\n\nfunction showNoResultsMessage() {\n  const errorMessage = document.createElement('p');\n  errorMessage.classList.add('no-results-message');\n  errorMessage.textContent =\n    \"OOPS... We are very sorry! We don't have any results matching your search.\";\n  errorContainer.appendChild(errorMessage);\n  ulRef.innerHTML = '';\n}\n\n// FETCH\nasync function fetchData(endpoint, options) {\n  const response = await fetch(`${BASE_URL}${endpoint}`, options);\n  const data = await response.json();\n  return data.results.slice(0, 20);\n}\n\nasync function fetchGenres(options) {\n  const response = await fetch(\n    'https://api.themoviedb.org/3/genre/movie/list?language=en',\n    options\n  );\n  const data = await response.json();\n  return data.genres;\n}\n\n// MARKUP\nfunction renderMarkup(movieData) {\n  return fetchGenres(options).then(genreData => {\n    const transformedData = transformData(movieData, genreData);\n    console.log(transformedData);\n    return generateMarkup(transformedData);\n  });\n}\n\nfunction generateMarkup(movie) {\n  console.log(movie);\n  const markup = movie\n    .map(\n      movie => `<li class=\"catalog-movie\">\n        <a class=\"catalog-item-link\" href=\"\">\n            <img class=\"catalog-list-img\" src=\"https://image.tmdb.org/t/p/w500${\n              movie.poster\n            }\" alt=\"${movie.title}\" />\n            <div class=\"catalog-movie-desc\">\n            <p class=\"catalog-item-title\">${movie.title}</p>\n            <p class=\"catalog-item-movie\">\n                ${movie.genreFirst}, ${movie.genreSecond} | \n                <span class=\"catalog-item-date\">\n                    ${movie.release_date.slice(0, 4)}\n                </span> \n            </p>\n            </div>\n            </a> \n        </li>`\n    )\n    .join('');\n  return markup;\n}\n\nfunction addMarkup(element, markup) {\n  element.innerHTML = markup;\n}\n\n// UTILS\nfunction transformData(movieData, genreData) {\n  const transformedMovies = movieData.map(movie => {\n    const genreIds = movie.genre_ids;\n    const genres = genreIds.map(\n      id => genreData.find(genre => genre.id === id).name\n    );\n\n    return {\n      release_date: movie.release_date,\n      id: movie.id,\n      title: movie.title,\n      poster: movie.poster_path,\n      genreFirst: genres[0],\n      genreSecond: genres[1],\n    };\n  });\n\n  return transformedMovies;\n}\n"],"names":["parcelRequire","$bpxeT","$3bd1cca3f426e70f$var$BASE_URL","$3bd1cca3f426e70f$var$options","method","headers","accept","Authorization","$3bd1cca3f426e70f$var$ulRef","document","querySelector","$3bd1cca3f426e70f$var$searchForm","$3bd1cca3f426e70f$var$searchInput","$3bd1cca3f426e70f$var$errorContainer","$3bd1cca3f426e70f$var$onPageLoad","perPage","screenWidth","window","innerWidth","$3bd1cca3f426e70f$var$fetchData","concat","then","response","console","log","$3bd1cca3f426e70f$var$renderMarkup","slice","markup","$3bd1cca3f426e70f$var$addMarkup","$3bd1cca3f426e70f$var$hideNoResultsMessage","errorMessage","remove","endpoint","options1","$3bd1cca3f426e70f$var$_fetchData","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","data","fetch","_ctx","sent","json","results","$3bd1cca3f426e70f$var$_fetchGenres","options2","genres","movieData","$3bd1cca3f426e70f$var$fetchGenres","genreData","movie1","transformedData","map","movie","genre_ids","id","find","genre","name","release_date","title","poster","poster_path","genreFirst","genreSecond","$3bd1cca3f426e70f$var$transformData","join","element","innerHTML","addEventListener","event","preventDefault","searchValue","value","trim","clear","length","createElement","classList","add","textContent","appendChild"],"version":3,"file":"catalog.f3cb1ab9.js.map"}
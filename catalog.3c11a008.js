var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequired7c6;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,i.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequired7c6=i),i("3rDVG"),i("5h2Rr");var a=i("8IXMh");const r={method:"GET",headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZDBhNDQ5OWUzZjBiMDM2MDI1ZDEyNTk1Mzk3MjI3YSIsInN1YiI6IjY0N2YxZDM3Y2FlZjJkMDEzNjJjZDBjMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.04GEOyHwNXnOZB4gUWNaiyPlLlOZ0z9Ttfl7T5UFMuk"}},o=document.querySelector(".catalog-list"),s=document.querySelector(".search-form"),l=document.querySelector(".search-form-input"),c=document.querySelector(".error-container");function d(){const e=window.innerWidth;let t;t=e>=768?20:10;p(`trending/movie/week?language=en-US&include_adult=false&include_video=false&page=1&per_page=${t}`,r).then((e=>{g(e.slice(0,t)).then((e=>{f(o,e),o.addEventListener("click",a.selectMovie)}))}))}function u(){const e=c.querySelector(".no-results-message");e&&e.remove()}async function p(e,t){const n=await fetch(`https://api.themoviedb.org/3/${e}`,t);return(await n.json()).results.slice(0,20)}function g(e){return async function(e){const t=await fetch("https://api.themoviedb.org/3/genre/movie/list?language=en",e);return(await t.json()).genres}(r).then((t=>{const n=function(e,t){return e.map((e=>{const n=e.genre_ids.map((e=>t.find((t=>t.id===e)).name));return{release_date:e.release_date,id:e.id,title:e.title,poster:e.poster_path,genreFirst:n[0],genreSecond:n[1]}}))}(e,t);return n.map((e=>`<li data-id="${e.id}" class="catalog-movie">\n        <a class="catalog-item-link" href="">\n            <img class="catalog-list-img" src="https://image.tmdb.org/t/p/w500${e.poster}" alt="${e.title}" />\n            <div class="catalog-movie-desc">\n            <p class="catalog-item-title">${e.title}</p>\n            <p class="catalog-item-movie">\n                ${e.genreFirst}, ${e.genreSecond} | \n                <span class="catalog-item-date">\n                    ${e.release_date.slice(0,4)}\n                </span> \n            </p>\n            </div>\n            </a> \n        </li>`)).join("")}))}function f(e,t){e.innerHTML=t}window.addEventListener("load",d),s.addEventListener("submit",(function(e){e.preventDefault();const t=l.value.trim();let n;n=window.innerWidth>=768?20:10;if(""!==t){p(`search/movie?query=${t}&language=en-US&page=1&per_page=${n}`,r).then((e=>{e.length>0?(g(e.slice(0,n)).then((e=>{f(o,e)})),u()):function(){const e=document.createElement("p");e.classList.add("no-results-message"),e.textContent="OOPS... We are very sorry! We don't have any results matching your search.",c.appendChild(e),o.innerHTML=""}()}))}else d(),u()})),i("8IXMh"),i("gTaRf");
//# sourceMappingURL=catalog.3c11a008.js.map

{"mappings":"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","sources":["src/js/components/hero.js","src/js/refs/heroRefs.js","src/js/markup/heroMarkup.js","src/js/api/fetchTrandingDay.js","src/js/api/fetchVideo.js","node_modules/@parcel/runtime-js/lib/runtime-7ca10b3772ca60a3.js","node_modules/@parcel/runtime-js/lib/runtime-6d4b1ca847a77f29.js","node_modules/@parcel/runtime-js/lib/runtime-fe38239f06bcdadf.js","src/js/api/fetchGenres.js","src/js/api/fetchTrandingWeek.js","node_modules/@parcel/runtime-js/lib/runtime-21d2e9386c9451c2.js"],"sourcesContent":["import { btnCloseRef, backdropModalRef } from '../refs/heroRefs';\n\nimport { createHeroMarkup } from '../markup/heroMarkup';\n\nwindow.addEventListener('load', onPageLoad);\n\nbtnCloseRef.addEventListener('click', onBtnCloseClick);\n\nfunction onPageLoad() {\n  try {\n    createHeroMarkup();\n    intervalId = setInterval(() => {\n      createHeroMarkup();\n    }, 20000);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction onBtnCloseClick(evt) {\n  backdropModalRef.classList.add('visuality-hidden');\n  if (document.querySelector('.iframe-hero')) {\n    const iframe = document.querySelector('.iframe-hero');\n\n    iframe.src = '';\n    document.body.classList.remove('scroll-block');\n  }\n  backdropModalRef.classList.add('visuality-hidden');\n}\n","const heroSectionRef = document.querySelector('.hero-section');\nconst heroCont = document.querySelector('.hero-container');\nconst btnCloseRef = document.querySelector('.hero-modal-close');\nconst backdropModalRef = document.querySelector('.hero-backdrop');\nconst modalWrapRef = document.querySelector('.modal-wrap');\n\nexport {\n  heroSectionRef,\n  heroCont,\n  btnCloseRef,\n  backdropModalRef,\n  modalWrapRef,\n};\n","import { getTrandingDay } from '../api/fetchTrandingDay';\nimport {\n  heroSectionRef,\n  heroCont,\n  backdropModalRef,\n  modalWrapRef,\n} from '../refs/heroRefs';\nimport { selectMovie } from '../components/modal';\nimport { addMarkup } from '../utils/addMarkup';\nimport { fetchVideo } from '../api/fetchVideo';\nimport imgError from '../../images/error/error-@1x-mobile.png';\nimport imgErrorTablet from '../../images/error/error-@1x-tablet.png';\nimport imgErrorDesc from '../../images/error/error-@1x-desctop.png';\n\nlet intervalId = null;\n\nconst options = {\n  method: 'GET',\n  headers: {\n    accept: 'application/json',\n    Authorization:\n      'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZDBhNDQ5OWUzZjBiMDM2MDI1ZDEyNTk1Mzk3MjI3YSIsInN1YiI6IjY0N2YxZDM3Y2FlZjJkMDEzNjJjZDBjMyIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.04GEOyHwNXnOZB4gUWNaiyPlLlOZ0z9Ttfl7T5UFMuk',\n  },\n};\n\nfunction createMarkup(data) {\n  heroSectionRef.style.backgroundImage = `linear-gradient(\n      86.77deg, #111111 30.38%, rgba(17, 17, 17, 0) 65.61%), url(\"https://image.tmdb.org/t/p/original${\n        data.backdrop_path || data.poster_path\n      }\")`;\n\n  return `  <h1 class=\"hero-title-resp\">${data.title || data.name}</h1>\n    \n    <div class=\"hero-rating\">\n              <div class=\"hero-rating_body\">\n                  <div class=\"rating_active\"></div>\n              </div>\n              <div class=\"rating_value visuality-hidden\">${\n                data.vote_average\n              }</div>\n              </div>\n  \n    <p class=\"hero-text-resp\">\n    ${data.overview.split('').slice(0, 150).join('') + '...'}\n  </p>\n    <p class=\"hero-text-big-resp\">\n      ${data.overview.split('').slice(0, 225).join('') + '...'}\n    </p>\n    <button type=\"button\" class=\"hero-btn-resp  js-open-video\" data-id=\"${\n      data.id\n    }\" >Watch trailer</button> <button type=\"button\"  class=\"hero-btn-details link\" data-id=\"${\n    data.id\n  }\">More details</button>`;\n}\n\nfunction createVideoMarkup(key) {\n  const videoUrl = `https://www.youtube.com/embed/${key}`;\n  return `<iframe class=\"iframe-hero\" autoplay; frameborder=\"0\"\n    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media;  gyroscope; picture-in-picture; web-share\"\n    allowfullscreen   width=\"250\" height=\"175\" src=\"${videoUrl}\"></iframe>`;\n}\n\nasync function createHeroMarkup() {\n  try {\n    const response = await getTrandingDay();\n\n    const movieInfo =\n      response.data.results[Math.floor(Math.random() * (19 - 1 + 1)) + 1];\n\n    const markup = createMarkup(movieInfo);\n    addMarkup(heroCont, markup);\n\n    const heroBtnTrailer = document.querySelector('.js-open-video');\n    const heroBtnDetails = document.querySelector('.hero-btn-details');\n\n    const ratingActiveWidth = movieInfo.vote_average / 0.05 / 2;\n    document.querySelector(\n      '.rating_active'\n    ).style.width = `${ratingActiveWidth}%`;\n\n    heroBtnDetails.addEventListener('click', selectMovie);\n    heroBtnTrailer.addEventListener('click', onBtnOpenClick);\n  } catch (error) {\n    clearInterval(intervalId);\n    console.log(error);\n  }\n}\n\nfunction onBtnOpenClick(evt) {\n  backdropModalRef.classList.remove('visuality-hidden');\n\n  document.body.classList.add('scroll-block');\n\n  fetchVideo(evt.target.dataset.id, options).then(res => {\n    const markup = res\n      ? createVideoMarkup(res)\n      : ` <p class=\"hero-error-text\">\n      OOPS... <br />We are very sorry!<br />\n      But we couldnâ€™t find the trailer.\n    </p>\n    <picture class=\"hero-picture\">\n      <source\n        media=\"(min-width:1280px)\"\n       \n        srcset=\"${imgErrorDesc}\"\n      />\n      <source\n        media=\"(min-width:768px)\"\n        \n        srcset=\"${imgErrorTablet}\"\n      />\n      <img\n        class=\"hero-error-img\" \n        src=\"${imgError}\"\n        alt=\"error\"\n      />\n    </picture>`;\n\n    addMarkup(modalWrapRef, markup);\n  });\n}\n\nexport { createHeroMarkup };\n","import axios from 'axios';\nimport { BASE_URL, API_KEY } from './apiKey';\n\nexport function getTrandingDay() {\n  return axios.get(`${BASE_URL}trending/all/day?language=en-US`, {\n    params: {\n      api_key: API_KEY,\n    },\n  });\n}\n","import axios from 'axios';\nimport { Notify } from 'notiflix';\nimport { BASE_URL } from './apiKey';\n\nexport async function fetchVideo(id, options) {\n  try {\n    const response = await axios.get(\n      `\n    ${BASE_URL}movie/${id}/videos`,\n      options\n    );\n\n    return response.data.results[0].key;\n  } catch (error) {\n    console.log(error);\n    Notify.info('Sorry,we couldnt find thrailer');\n  }\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('hfX1u') + require('./helpers/bundle-manifest').resolve(\"hrXwp\");","module.exports = require('./helpers/bundle-url').getBundleURL('hfX1u') + require('./helpers/bundle-manifest').resolve(\"fIMz9\");","module.exports = require('./helpers/bundle-url').getBundleURL('hfX1u') + require('./helpers/bundle-manifest').resolve(\"8uvG1\");","import axios from 'axios';\n\nimport { BASE_URL, API_KEY } from './apiKey';\n\nexport function getGenres() {\n  return axios.get(`${BASE_URL}genre/movie/list`, {\n    params: {\n      api_key: API_KEY,\n      language: 'en',\n    },\n  });\n}\n","import axios from 'axios';\n\nimport { BASE_URL, API_KEY } from './apiKey';\n\nexport function getTrendingMovie(page = 1) {\n  return axios.get(`${BASE_URL}trending/movie/week`, {\n    params: {\n      api_key: API_KEY,\n      language: 'en-US',\n      include_adult: false,\n      include_video: false,\n      page,\n      //per_page: 10,\n    },\n  });\n}\n","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"hfX1u\\\":\\\"index.f7fa3418.js\\\",\\\"hrXwp\\\":\\\"error-@1x-mobile.8ac0db21.png\\\",\\\"fIMz9\\\":\\\"error-@1x-tablet.3a2ac13a.png\\\",\\\"8uvG1\\\":\\\"error-@1x-desctop.1cc796a3.png\\\"}\"));"],"names":["$exg8f","parcelRequire","window","addEventListener","$kWZRS","createHeroMarkup","intervalId","setInterval","error","console","log","btnCloseRef","evt","backdropModalRef","classList","add","document","querySelector","src","body","remove","$a950a94187f4ac9c$export$d5f6dd99c910cd37","$a950a94187f4ac9c$export$f20cf965ee5a571f","$a950a94187f4ac9c$export$e3444e2f109c18c4","$a950a94187f4ac9c$export$d02b9507ec486855","$a950a94187f4ac9c$export$9ca31af344bba76a","$bpxeT","$f409371a145b9051$var$options","method","headers","accept","Authorization","$f409371a145b9051$var$createMarkup","data","heroSectionRef","style","backgroundImage","concat","backdrop_path","poster_path","title","name","vote_average","overview","split","slice","join","id","$f409371a145b9051$export$ef44461a32c6d630","$f409371a145b9051$var$_createHeroMarkup","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","response","movieInfo","markup","heroBtnTrailer","heroBtnDetails","ratingActiveWidth","$ademb","getTrandingDay","_ctx","sent","results","Math","floor","random","$5aGdC","addMarkup","heroCont","width","$8BR1R","selectMovie","$f409371a145b9051$var$onBtnOpenClick","clearInterval","t0","$7sZCr","fetchVideo","target","dataset","then","res","videoUrl","$faUbM","$hBF7l","$8UA3G","modalWrapRef","$dIxxU","$76f6413fee232259$export$c56726c5aabf3ac4","default","get","$ks1QH","BASE_URL","params","api_key","API_KEY","$56faf22fccbf08cb$export$e4e38755600886fc","options","$56faf22fccbf08cb$var$_fetchVideo","key","$6JpON","Notify","info","module","exports","getBundleURL","resolve","$4676313642affc48$export$c5604fa8028da00","language","$2f33c81a2f28a507$export$56d6cd672cd167a5","page","length","include_adult","include_video","register","JSON","parse"],"version":3,"file":"index.f7fa3418.js.map"}